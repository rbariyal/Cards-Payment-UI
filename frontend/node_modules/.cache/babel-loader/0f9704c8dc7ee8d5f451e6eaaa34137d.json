{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/arora/OneDrive/Desktop/React/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"C:/Users/arora/OneDrive/Desktop/React/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/arora/OneDrive/Desktop/React/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _templateObject,_templateObject2,_templateObject3;import React from'react';import styled from\"styled-components\";import MaskedInput from\"react-text-mask\";import axios from'../axios';import{EXPIRYDATE}from\"../constant\";import{stripeCardExpirValidation,textWithSpacesOnly}from\"../validations\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var reducer=function reducer(state,action){console.log(\"action\",action.data);switch(action.type){case\"cardHolder\":return _objectSpread(_objectSpread({},state),{},{cardHolder:action.data});case\"expiry\":return _objectSpread(_objectSpread({},state),{},{expiry:action.data});case\"cleanState\":return _objectSpread({},action.data);default:return state;}};// const [Edit,setEdit]=useState(false);\nfunction UpdateCard(props){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),errors=_React$useState2[0],setErrors=_React$useState2[1];var _React$useReducer=React.useReducer(reducer,{cardHolder:\"\",expiry:\"\"}),_React$useReducer2=_slicedToArray(_React$useReducer,2),updatedcard=_React$useReducer2[0],setUpdatedCard=_React$useReducer2[1];var handleValidations=function handleValidations(type,value){var errorText;switch(type){case\"cardHolder\":errorText=value===\"\"?\"Required\":textWithSpacesOnly(value);setErrors(_objectSpread(_objectSpread({},errors),{},{cardHolderError:errorText}));break;case\"expiry\":errorText=value===\"\"?\"Required\":stripeCardExpirValidation(value);setErrors(_objectSpread(_objectSpread({},errors),{},{expiryError:errorText}));break;default:break;}};var handleBlur=function handleBlur(e){handleValidations(e.target.name,e.target.value);};var handleInputData=function handleInputData(e){setUpdatedCard({type:e.target.name,data:e.target.value});};var Updatedata=function Updatedata(){axios.put(\"/cards/update/\".concat(props.id),_objectSpread({},updatedcard)).then(function(){setUpdatedCard({type:\"cleanState\",data:{cardHolder:\"\",expiry:\"\"}});props.Fetchdata();}).catch(function(err){return alert(err.message);});// props.setEdit(!props.Edit); \n};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Update,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"CardHolder's Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,name:\"cardHolder\",onChange:handleInputData,placeholder:\"Enter cardholder's name\",value:updatedcard.cardHolder,onBlur:handleBlur}),errors&&errors.cardHolderError&&errors.cardHolderError.length>1&&/*#__PURE__*/_jsx(Error,{children:errors.cardHolderError}),/*#__PURE__*/_jsx(\"p\",{children:\"Expiry Date:\"}),/*#__PURE__*/_jsx(MaskedInput,{mask:EXPIRYDATE,name:\"expiry\",required:true,placeholderChar:\"\\u2000\",placeholder:\"MM/YY\",onChange:handleInputData,value:updatedcard.expiry,onBlur:handleBlur}),errors&&errors.expiryError&&errors.expiryError.length>1&&/*#__PURE__*/_jsx(Error,{children:errors.expiryError}),/*#__PURE__*/_jsx(Button,{onClick:Updatedata,children:\"Update\"})]})});}var Update=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\ndisplay:flow-root;\\n label {\\n    font-size: 14px;\\n\\n    margin-left: 18px;\\n    margin-right: 18px;\\n\\n  }\\n  button\\n  {\\n    margin-left:20px\\n  }\\n \"])));var Button=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n \\n background-color:#00FFFF;\\n border: 2px solid black;\\n border-radius:4px;\\n margin:5px;\\n \\n\"])));var Error=styled.span(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nfont-size: 13px;\\nfont-weight: bold;\\ncolor: red;\\n\"])));export default UpdateCard;","map":{"version":3,"names":["React","styled","MaskedInput","axios","EXPIRYDATE","stripeCardExpirValidation","textWithSpacesOnly","reducer","state","action","console","log","data","type","cardHolder","expiry","UpdateCard","props","useState","errors","setErrors","useReducer","updatedcard","setUpdatedCard","handleValidations","value","errorText","cardHolderError","expiryError","handleBlur","e","target","name","handleInputData","Updatedata","put","id","then","Fetchdata","catch","err","alert","message","length","Update","div","Button","button","Error","span"],"sources":["C:/Users/arora/OneDrive/Desktop/React/frontend/src/components/UpdateCard.js"],"sourcesContent":["import React from 'react';\r\nimport styled from \"styled-components\";\r\nimport MaskedInput from \"react-text-mask\";\r\nimport axios from '../axios'\r\nimport {\r\n  EXPIRYDATE,\r\n\r\n} from \"../constant\"\r\nimport {\r\n  stripeCardExpirValidation,\r\n  textWithSpacesOnly,\r\n \r\n} from \"../validations\"\r\n\r\nconst reducer = (state, action) => {\r\n  console.log(\"action\", action.data);\r\n  switch (action.type) {\r\n    case \"cardHolder\":\r\n      return { ...state, cardHolder: action.data };\r\n    case \"expiry\":\r\n      return { ...state, expiry: action.data };\r\n    case \"cleanState\":\r\n      return { ...action.data };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// const [Edit,setEdit]=useState(false);\r\n\r\nfunction UpdateCard(props)\r\n{\r\n \r\nconst [errors, setErrors] = React.useState({});\r\nconst [updatedcard,setUpdatedCard]=React.useReducer(reducer,{\r\n  cardHolder: \"\",\r\n  expiry: \"\"\r\n})\r\n\r\n\r\n\r\n  const handleValidations=(type, value)=>\r\n{\r\n  let errorText;\r\n  switch (type)\r\n  {\r\n    case \"cardHolder\":\r\n      errorText=value===\"\" ? \"Required\": textWithSpacesOnly(value);\r\n      setErrors({ ...errors, cardHolderError: errorText });\r\n      break;\r\n    case \"expiry\":\r\n      errorText=value===\"\" ? \"Required\" : stripeCardExpirValidation(value);\r\n      setErrors({ ...errors, expiryError: errorText });\r\n     break;\r\n      default:\r\n        break;\r\n  }\r\n}\r\n\r\nconst handleBlur=(e)=>\r\n{\r\n  handleValidations(e.target.name,e.target.value)\r\n}\r\n\r\n\r\n\r\n\r\n  const handleInputData=(e)=>\r\n  {\r\n    setUpdatedCard({\r\n      type:e.target.name,data:e.target.value\r\n    })\r\n  }\r\n\r\n  const Updatedata=()=>\r\n  {\r\n  \r\n   axios\r\n      .put(`/cards/update/${props.id}`,{...updatedcard})\r\n      .then(()=>\r\n      {\r\n        setUpdatedCard(\r\n          {\r\n            type:\"cleanState\",\r\n            data: {\r\n              cardHolder: \"\",\r\n              expiry: \"\"\r\n            } \r\n          }\r\n        )\r\n        props.Fetchdata();\r\n      })\r\n      .catch((err)=>alert(err.message));   \r\n      // props.setEdit(!props.Edit); \r\n     \r\n}\r\n\r\n\r\n  return <><Update>\r\n\r\n       <p>CardHolder's Name</p>\r\n      <input type=\"text\"\r\n       required\r\n       name='cardHolder'\r\n       onChange={handleInputData}\r\nplaceholder=\"Enter cardholder's name\"\r\n       value={updatedcard.cardHolder}\r\n        onBlur={handleBlur}\r\n       />\r\n        {errors &&\r\n                errors.cardHolderError &&\r\n                errors.cardHolderError.length > 1 && (\r\n                  <Error>{errors.cardHolderError}</Error>\r\n                )}\r\n    \r\n      <p>Expiry Date:</p>\r\n         <MaskedInput\r\n        mask={EXPIRYDATE}\r\n        name=\"expiry\"\r\n        required\r\n        placeholderChar={\"\\u2000\"}\r\n        placeholder=\"MM/YY\"\r\n      onChange={handleInputData}\r\n            value={updatedcard.expiry}\r\n              onBlur={handleBlur}\r\n            />\r\n              {errors &&\r\n                    errors.expiryError &&\r\n                    errors.expiryError.length > 1 && (\r\n                      <Error>{errors.expiryError}</Error>\r\n                    )}\r\n    \r\n  <Button onClick={Updatedata}>Update</Button>\r\n  </Update>\r\n   \r\n  </>\r\n}\r\nconst Update=styled.div`\r\ndisplay:flow-root;\r\n label {\r\n    font-size: 14px;\r\n\r\n    margin-left: 18px;\r\n    margin-right: 18px;\r\n\r\n  }\r\n  button\r\n  {\r\n    margin-left:20px\r\n  }\r\n `\r\n\r\n const Button = styled.button`\r\n \r\n background-color:#00FFFF;\r\n border: 2px solid black;\r\n border-radius:4px;\r\n margin:5px;\r\n \r\n`;\r\n\r\n\r\nconst Error = styled.span`\r\nfont-size: 13px;\r\nfont-weight: bold;\r\ncolor: red;\r\n`;\r\n\r\nexport default UpdateCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}